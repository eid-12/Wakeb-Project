(function(){"use strict";var e={456:function(e,t,o){e.exports=o.p+"img/map-marker-blue.48a8e449.svg"},2743:function(e,t,o){var r=o(5130),s=o(6768);function l(e,t){const o=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.Wv)(o)}var n=o(1241);const a={},u=(0,n.A)(a,[["render",l]]);var c=u,i=o(1387);const d={class:"h-screen realtive"};function p(e,t,o,r,l,n){const a=(0,s.g2)("GeoErrorModal"),u=(0,s.g2)("MapFeatures");return(0,s.uX)(),(0,s.CE)("div",d,[r.geoError?((0,s.uX)(),(0,s.Wv)(a,{key:0,onCloseGeoError:r.closeGeoError,geoErrorMsg:r.geoErrorMsg},null,8,["onCloseGeoError","geoErrorMsg"])):(0,s.Q3)("",!0),(0,s.bF)(u,{onToggleSearchResults:r.toggleSearchResults,onGetGeolocation:r.getGeolocation,onPlotResult:r.plotResult,onRemoveResult:r.removeResult,coords:r.coords,fetchCoords:r.fetchCoords,searchResults:r.searchResults},null,8,["onToggleSearchResults","onGetGeolocation","onPlotResult","onRemoveResult","coords","fetchCoords","searchResults"]),t[0]||(t[0]=(0,s.Lk)("div",{id:"map",class:"h-full z-[1]"},null,-1))])}o(8111),o(1701);var v=o(6886),f=o.n(v),m=o(144),g=o(4232);const h={class:"h-screen absolute w-full z-10 flex justify-center items-start pt-[125px] bg-black/50"},x={class:"flex flex-col bg-white w-[80%] sm:w-[450px] px-6 py-4 rounded-md"},y={class:"text-lg mb-1"};function b(e,t,o,r,l,n){return(0,s.uX)(),(0,s.CE)("div",h,[(0,s.Lk)("div",x,[(0,s.Lk)("h1",y,"Error: "+(0,g.v_)(this.geoErrorMsg),1),t[1]||(t[1]=(0,s.Lk)("p",{class:"text-sm mb-4"}," To take advantage of this applications features, please ensure location services are enabled ",-1)),(0,s.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("closeGeoError")),class:"self-start py-2 px-4 bg-red-500 text-white rounded-md text-sm"}," Close ")])])}var k={props:["geoErrorMsg"]};const R=(0,n.A)(k,[["render",b]]);var w=R;const C={class:"w-full md:w-auto absolute md:top-[40px] md:left-[60px] z-[2] flex gap-4 px-6 py-8 md:px-0 md:py-0 bg-transparent"},E={class:"relative flex-1 md:min-w-[350px]"},L={class:"absolute mt-2 w-full"},S={key:0,class:"h-[200px] overflow-scroll bg-white rounded-md"},j={key:1},M=["onClick"],O={class:"text-xs"},z={key:1,class:"mt-2 px-4 py-3 bg-white rounded-md"},G={class:"text-lg"},K={class:"text-xs mb-1"},T={class:"text-xs"};function _(e,t,o,l,n,a){const u=(0,s.g2)("LoadingSpinner");return(0,s.uX)(),(0,s.CE)("div",C,[(0,s.Lk)("div",E,[(0,s.bo)((0,s.Lk)("input",{class:"pl-9 pr-4 py-3 text-sm focus:outline-none w-full shadow-md rounded-md",type:"text",placeholder:"Start your search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e),onInput:t[1]||(t[1]=(...e)=>l.search&&l.search(...e)),onFocus:t[2]||(t[2]=t=>e.$emit("toggleSearchResults"))},null,544),[[r.Jo,l.searchQuery]]),t[6]||(t[6]=(0,s.Lk)("div",{class:"absolute top-0 left-[8px] h-full flex items-center"},[(0,s.Lk)("i",{class:"fas fa-search"})],-1)),(0,s.Lk)("div",L,[l.searchQuery&&o.searchResults?((0,s.uX)(),(0,s.CE)("div",S,[l.searchData?((0,s.uX)(),(0,s.CE)("div",j,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.searchData,(e,o)=>((0,s.uX)(),(0,s.CE)("div",{class:"px-4 py-2 flex gap-x-2 cursor-pointer hover:bg-slate-600 hover:text-white",key:o,onClick:t=>l.selectResult(e)},[t[5]||(t[5]=(0,s.Lk)("i",{class:"fas fa-map-marker-alt"},null,-1)),(0,s.Lk)("p",O,(0,g.v_)(e.place_name_en),1)],8,M))),128))])):((0,s.uX)(),(0,s.Wv)(u,{key:0}))])):(0,s.Q3)("",!0),l.selectedResult?((0,s.uX)(),(0,s.CE)("div",z,[(0,s.Lk)("i",{onClick:t[3]||(t[3]=(...e)=>l.removeResult&&l.removeResult(...e)),class:"flex justify-end far fa-times-circle"}),(0,s.Lk)("h1",G,(0,g.v_)(l.selectedResult.text),1),(0,s.Lk)("p",K,(0,g.v_)(l.selectedResult.properties.address)+", "+(0,g.v_)(l.selectedResult.city)+", "+(0,g.v_)(l.selectedResult.state),1),(0,s.Lk)("p",T,(0,g.v_)(l.selectedResult.properties.category),1)])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",{class:(0,g.C4)(["px-4 bg-white flex items-center shadow-md rounded-md min-h-[45px]",{"bg-slate-600":o.coords}]),onClick:t[4]||(t[4]=t=>e.$emit("getGeolocation"))},[(0,s.Lk)("i",{class:(0,g.C4)(["fas fa-location-arrow 'text-slate-600' text-[18px]",{"text-white":o.coords,"animate-pulse":o.fetchCoords}])},null,2)],2)])}var I=o(4373);const X={class:"h-full w-full flex items-center justify-center"};function J(e,t,o,r,l,n){return(0,s.uX)(),(0,s.CE)("div",X,t[0]||(t[0]=[(0,s.Lk)("span",{class:"block w-[60px] h-[60px] border-[5px] border-solid border-transparent border-t-black rounded-full animate-spin"},null,-1)]))}var P={name:"loadingSpinner"};const Q=(0,n.A)(P,[["render",J]]);var D=Q,F={props:["fetchCoords","coords","searchResults"],components:{LoadingSpinner:D},setup(e,{emit:t}){const o=(0,m.KR)(null),r=(0,m.KR)(null),s=(0,m.KR)(null),l=(0,m.KR)(null),n=()=>{clearTimeout(s.value),r.value=null,s.value=setTimeout(async()=>{if(""!==o.value){const t=new URLSearchParams({fuzzyMatch:!0,language:"en",limit:10,proximity:e.coords?`${e.coords.lng},${e.coords.lat}`:"0,0"}),s=await I.A.get(`api/search/${o.value}?${t}`);r.value=s.data.features}},750)},a=e=>{l.value=e,t("plotResult",e.geometry)},u=()=>{l.value=null,t("removeResult")};return{searchQuery:o,searchData:r,QueryTimeout:s,search:n,selectResult:a,selectedResult:l,removeResult:u}}};const W=(0,n.A)(F,[["render",_]]);var Z=W,$={name:"HomeView",components:{GeoErrorModal:w,MapFeatures:Z},setup(){let e;(0,s.sV)(()=>{e=f().map("map").setView([24.7136,46.6753],11),f().tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZWlkcnIiLCJhIjoiY21jOHQwbHg0MDRmZzJyczlja3BjZzczMiJ9.DSq-cPrfxg8FhKbnDltgWg",{maxZoom:19,attribution:'Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',id:"mapbox/streets-v11",accessToken:"pk.eyJ1IjoiZWlkcnIiLCJhIjoiY21jOHQwbHg0MDRmZzJyczlja3BjZzczMiJ9.DSq-cPrfxg8FhKbnDltgWg"}).addTo(e),e.on("moveend",()=>{y()}),u()});const t=(0,m.KR)(null),r=(0,m.KR)(null),l=(0,m.KR)(null),n=(0,m.KR)(null),a=(0,m.KR)(null),u=()=>t.value?(t.value=null,sessionStorage.removeItem("coords"),void e.removeLayer(l.value)):sessionStorage.getItem("coords")?(t.value=JSON.parse(sessionStorage.getItem("coords")),void d(t.value)):(r.value=!0,void navigator.geolocation.getCurrentPosition(c,i)),c=e=>{r.value=null;const o={lat:e.coords.latitude,lng:e.coords.longitude};sessionStorage.setItem("coords",JSON.stringify(o)),t.value=o,d(t.value)},i=e=>{r.value=null,n.value=!0,a.value=e.message},d=t=>{const r=f().icon({iconUrl:o(5633),iconSize:[35,35]});l.value=f().marker([t.lat,t.lng],{icon:r}).addTo(e),e.setView([t.lat,t.lng],10)},p=()=>{n.value=null,a.value=null},v=(0,m.KR)(null),g=t=>{v.value&&e.removeLayer(v.value);const r=f().icon({iconUrl:o(456),iconSize:[35,35]});v.value=f().marker([t.coordinates[1],t.coordinates[0]],{icon:r}).addTo(e),e.setView([t.coordinates[1],t.coordinates[0]],14),y()},h=(0,m.KR)(null),x=()=>{h.value=!h.value},y=()=>{h.value=null},b=()=>{e.removeLayer(v.value)};return{coords:t,fetchCoords:r,geoMarker:l,closeGeoError:p,geoError:n,geoErrorMsg:a,getGeolocation:u,plotResult:g,searchResults:h,toggleSearchResults:x,closeSearchResults:y,removeResult:b}}};const A=(0,n.A)($,[["render",p]]);var V=A;const H=[{path:"/",name:"home",component:V}],U=(0,i.aE)({history:(0,i.Bt)(),routes:H});var B=U;(0,r.Ef)(c).use(B).mount("#app")},5633:function(e,t,o){e.exports=o.p+"img/map-marker-red.d479dee5.svg"}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var l=t[r]={exports:{}};return e[r].call(l.exports,l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,r,s,l){if(!r){var n=1/0;for(i=0;i<e.length;i++){r=e[i][0],s=e[i][1],l=e[i][2];for(var a=!0,u=0;u<r.length;u++)(!1&l||n>=l)&&Object.keys(o.O).every(function(e){return o.O[e](r[u])})?r.splice(u--,1):(a=!1,l<n&&(n=l));if(a){e.splice(i--,1);var c=s();void 0!==c&&(t=c)}}return t}l=l||0;for(var i=e.length;i>0&&e[i-1][2]>l;i--)e[i]=e[i-1];e[i]=[r,s,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,l,n=r[0],a=r[1],u=r[2],c=0;if(n.some(function(t){return 0!==e[t]})){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(u)var i=u(o)}for(t&&t(r);c<n.length;c++)l=n[c],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(i)},r=self["webpackChunkclient"]=self["webpackChunkclient"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],function(){return o(2743)});r=o.O(r)})();
//# sourceMappingURL=app.c32f8d70.js.map