(function(){"use strict";var e={456:function(e,t,a){e.exports=a.p+"img/map-marker-blue.48a8e449.svg"},2649:function(e,t,a){var l=a(5130),s=a(6768);const n={style:{display:"none"}};var o={__name:"AlertsContainer",setup(e){return(e,t)=>((0,s.uX)(),(0,s.CE)("div",n))}};const r=o;var i=r,c={__name:"App",setup(e){return(e,t)=>{const a=(0,s.g2)("RouterView");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(a),(0,s.bF)(i)],64)}}};const u=c;var d=u,p=a(1387),m=(a(4114),a(8111),a(1701),a(4232)),v=a(144),g=a(6886),y=a.n(g),f=(a(9109),a(4373));const k=f.A.create({baseURL:"https://api-gateway-production-bf8a.up.railway.app/api",withCredentials:!0}),b=f.A.create({baseURL:"https://auth-service-production-cd9b.up.railway.app/api/auth",withCredentials:!0}),h=f.A.create({baseURL:"https://api.mapbox.com/geocoding/v5/mapbox.places/"}),w=async(e,t)=>{try{const a=new URLSearchParams({access_token:"pk.eyJ1IjoiZWlkcnIiLCJhIjoiY21jOHQwbHg0MDRmZzJyczlja3BjZzczMiJ9.DSq-cPrfxg8FhKbnDltgWg",...t}),l=await h.get(`${encodeURIComponent(e)}.json?${a.toString()}`);return l.data}catch(a){throw console.error("Search error:",a.message),a}},L=async()=>{const{data:e}=await k.get("/user");return e},C=(e,t)=>k.patch("/user/email",{newEmail:e,password:t}),x=e=>k.post("/search",{query:e}),_=e=>k.post("/saved",e),S=()=>k.get("/saved"),E=e=>k.delete(`/saved/${e}`),R=e=>k.patch(`/user/admin/role/${e}`),P=(e=0,t=10)=>k.get(`/user/admin?page=${e}&size=${t}`),U=()=>k.get("/search"),K=()=>k.delete("/search"),A=e=>k.post("/place",e),X=()=>k.get("/place"),W=e=>k.delete(`/place/${e}`),I=()=>k.delete("/place"),F=(e,t,a)=>b.patch("/password",{current:e,_new:t,userId:a}),D=e=>b.delete(`/dele/${e}`),M=(e,t)=>b.patch("/username",{userId:e,newUsername:t}),T=({username:e,password:t})=>b.post("/register",{username:e,password:t}),z=({username:e,password:t})=>b.post("/login",{username:e,password:t}),V=(e,t)=>b.patch(`/admin/users/${e}`,{password:t});(0,s.sV)(async()=>{try{j.value=await L()}catch(e){console.error("Failed to load user",e)}});const j=(0,v.KR)(null);function B(e){j.value=e}function $(){j.value=null}function O(){return{user:j,setUser:B,clearUser:$}}const J={class:"geo-modal-overlay"},N={class:"geo-modal-content"},Q={class:"geo-modal-title"};function H(e,t,a,l,n,o){return(0,s.uX)(),(0,s.CE)("div",J,[(0,s.Lk)("div",N,[(0,s.Lk)("h1",Q,"Error: "+(0,m.v_)(a.geoErrorMsg),1),t[1]||(t[1]=(0,s.Lk)("p",{class:"geo-modal-message"}," To take advantage of this application's features, please ensure location services are enabled. ",-1)),(0,s.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("closeGeoError")),class:"geo-modal-button"}," Close ")])])}var G={props:["geoErrorMsg"]},Z=a(1241);const q=(0,Z.A)(G,[["render",H],["__scopeId","data-v-5204cbe6"]]);var Y=q,ee=a(3840),te=a.n(ee);function ae(){function e({type:e="info",title:t="",message:a="",duration:l}={}){const s={danger:"error",error:"error",success:"success",info:"info",warning:"warning"},n=s[e]||"info",o=l??("success"===e?2500:void 0);return te().fire({icon:n,title:t,text:a,confirmButtonText:"Ok",confirmButtonColor:"#10b981",timer:o,timerProgressBar:!o,customClass:{confirmButton:"swal-custom-btn"}})}async function t({title:e,message:t,confirmText:a="Yes",cancelText:l="Cancel"}={}){const s=await te().fire({icon:"question",title:e,text:t,showCancelButton:!0,showConfirmButton:!0,confirmButtonText:a,cancelButtonText:l,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",customClass:{confirmButton:"swal-custom-btn"}});return s.isConfirmed}async function a({title:e="Enter Password",label:t="Password",confirmText:a="Submit",cancelText:l="Cancel"}={}){const s=await te().fire({title:e,input:"password",inputLabel:t,inputPlaceholder:"Enter new password",inputAttributes:{autocapitalize:"off",autocorrect:"off"},showCancelButton:!0,confirmButtonText:a,cancelButtonText:l,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",customClass:{confirmButton:"swal-custom-btn"}});return s.isConfirmed?s.value:null}return{showAlert:e,showConfirm:t,showPasswordPrompt:a}}const le={class:"alerts-wrapper"},se={class:"alert__label"},ne={class:"alert__msg"},oe=["onClick"];var re={__name:"LoadingSpinner",setup(e){const{alerts:t,removeAlert:a}=ae(),n={success:"Success!",danger:"Danger!",info:"Info!",warning:"Warning!"};return(e,o)=>((0,s.uX)(),(0,s.CE)("div",le,[(0,s.bF)(l.F,{name:"fade",tag:"div"},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,v.R1)(t),e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,m.C4)(["alert","alert--"+e.type]),role:"alert"},[(0,s.Lk)("strong",se,(0,m.v_)(n[e.type]),1),(0,s.Lk)("span",ne,(0,m.v_)(e.message),1),(0,s.Lk)("button",{class:"alert__close","aria-label":"Close",onClick:t=>(0,v.R1)(a)(e.id)}," × ",8,oe)],2))),128))]),_:1})]))}};const ie=(0,Z.A)(re,[["__scopeId","data-v-67ebd6c3"]]);var ce=ie;const ue={class:"search-container"},de={class:"search-box"},pe={class:"search-results-wrapper"},me={key:0,class:"search-results"},ve={key:1},ge=["onClick"],ye={class:"result-text"},fe={key:0},ke={key:1,class:"selected-result"},be={class:"selected-removeResult-title"},he={class:"selected-subtext"},we={class:"selected-category"};var Le={__name:"MapFeatures",props:{fetchCoords:Boolean,coords:Object,searchResults:Boolean},emits:["plotResult","removeResult","toggleSearchResults","getGeolocation","addRoute","saveHistory"],setup(e,{expose:t,emit:a}){const n=e,o=a,r=(0,v.KR)(""),i=(0,v.KR)(null),c=(0,v.KR)(null),u=(0,v.KR)(null);function d(e,t){const a=e=>e*Math.PI/180,l=6371,s=a(t.lat-e.lat),n=a(t.lng-e.lng),o=a(e.lat),r=a(t.lat),i=Math.sin(s/2)**2+Math.sin(n/2)**2*Math.cos(o)*Math.cos(r);return 2*l*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))}const p=()=>{clearTimeout(c.value),i.value=null,c.value=setTimeout(async()=>{const e=r.value.trim();if(e)try{const t=await w(e,{fuzzyMatch:!0,language:"en",limit:10,proximity:n.coords?`${n.coords.lng},${n.coords.lat}`:"0,0"});let a=t.features||[];n.coords&&(a=a.map(e=>(e.distance=d(n.coords,{lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]}),e)).sort((e,t)=>e.distance-t.distance)),i.value=a,o("saveHistory",e)}catch(t){console.error("Search error:",t),i.value=[]}else i.value=null},750)},g=e=>{u.value=e,o("removeResult"),o("plotResult",e.geometry)},y=()=>{u.value=null,o("removeResult"),r.value=null};return(0,s.hi)(()=>clearTimeout(c.value)),t({removeResults:y}),(t,a)=>((0,s.uX)(),(0,s.CE)("div",ue,[(0,s.Lk)("div",de,[(0,s.bo)((0,s.Lk)("input",{class:"search-input",type:"text",placeholder:"Start your search...","onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),onInput:p,onFocus:a[1]||(a[1]=e=>t.$emit("toggleSearchResults"))},null,544),[[l.Jo,r.value]]),a[5]||(a[5]=(0,s.Lk)("div",{class:"search-icon"},[(0,s.Lk)("i",{class:"fas fa-search"})],-1)),(0,s.Lk)("div",pe,[r.value&&e.searchResults?((0,s.uX)(),(0,s.CE)("div",me,[i.value?((0,s.uX)(),(0,s.CE)("div",ve,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"result-item",key:t,onClick:t=>g(e)},[a[4]||(a[4]=(0,s.Lk)("i",{class:"fas fa-map-marker-alt"},null,-1)),(0,s.Lk)("p",ye,[(0,s.eW)((0,m.v_)(e.place_name_en)+" ",1),e.distance?((0,s.uX)(),(0,s.CE)("span",fe," – "+(0,m.v_)(e.distance.toFixed(1))+" km ",1)):(0,s.Q3)("",!0)])],8,ge))),128))])):((0,s.uX)(),(0,s.Wv)(ce,{key:0}))])):(0,s.Q3)("",!0),u.value?((0,s.uX)(),(0,s.CE)("div",ke,[(0,s.Lk)("i",{onClick:y,class:"close-icon far fa-times-circle"}),(0,s.Lk)("i",{onClick:a[2]||(a[2]=e=>t.$emit("addRoute")),class:"route-icon fas fa-route"}),(0,s.Lk)("h1",be,(0,m.v_)(u.value.text),1),(0,s.Lk)("p",he,(0,m.v_)(u.value.properties.address)+", "+(0,m.v_)(u.value.city)+", "+(0,m.v_)(u.value.state),1),(0,s.Lk)("p",we,(0,m.v_)(u.value.properties.category),1)])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",{class:(0,m.C4)(["geolocation-btn",{"geo-active":e.coords}]),onClick:a[3]||(a[3]=e=>t.$emit("getGeolocation"))},[(0,s.Lk)("i",{class:(0,m.C4)(["fas fa-location-arrow geo-icon",{"text-white":e.coords,"animate-pulse":e.fetchCoords}])},null,2)],2)]))}};const Ce=(0,Z.A)(Le,[["__scopeId","data-v-5a25ac26"]]);var xe=Ce;const _e={class:"login-panel"},Se={class:"input-group"},Ee={class:"input-group"},Re={key:0,class:"input-group"},Pe={class:"register-text"};var Ue={__name:"LoginPanel",emits:["close","success"],setup(e,{expose:t,emit:a}){const{showAlert:n,showConfirm:o}=ae(),{setUser:r,clearUser:i}=O(),c=a,u=(0,v.KR)(!1),d=(0,v.KR)({username:"",password:"",confirmPassword:""}),p=()=>{d.value={username:"",password:"",confirmPassword:""}};function g(){u.value=!u.value,p()}function y(){i(),localStorage.removeItem("savedPlaces"),sessionStorage.removeItem("coords")}function f(e){const t=6,a=/[A-Z]/.test(e),l=/[a-z]/.test(e),s=/[0-9]/.test(e);return e.length>=t&&a&&l&&s}function k(e){const t=3,a=/^[a-zA-Z0-9_-]+$/,l=/^[-_]|[-_]$/.test(e);return e.length>=t&&a.test(e)&&!l}async function b(){const{username:e,password:t,confirmPassword:a}=d.value;if(e&&t)if(u.value){if(t!==a)return void n({type:"warning",title:"Mismatch",message:"Passwords do not match."});if(!f(t))return void n({type:"warning",title:"Weak Password",message:"Password must be at least 6 characters and contain uppercase, lowercase letters, and a number."});if(!k(e))return void n({type:"warning",title:"Invalid Username",message:"Username must be at least 3 characters and contain only letters, numbers, hyphens (-), or underscores (_). It cannot start or end with - or _."});try{await T({username:e,password:t}),n({type:"success",title:"Account Created",message:"Account created! Please sign in."}),c("success")}catch(l){const e=l.response?.data||"Registration failed. Please try again.";n({type:"danger",title:"Registration Error",message:e})}}else try{await z({username:e,password:t});const a=await L();r(a),n({type:"success",title:"Login Successful",message:"Welcome!"}),c("success"),p()}catch(l){const e="Invalid username or password.";n({type:"danger",title:"Login Failed",message:e})}else n({type:"warning",title:"Missing Fields",message:"Please fill in all required fields."})}return t({logoutUser:y}),(e,t)=>((0,s.uX)(),(0,s.CE)("div",_e,[(0,s.Lk)("h2",null,(0,m.v_)(u.value?"Sign Up":"Sign In"),1),(0,s.Lk)("div",Se,[t[4]||(t[4]=(0,s.Lk)("i",{class:"fas fa-user"},null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"Username","onUpdate:modelValue":t[0]||(t[0]=e=>d.value.username=e)},null,512),[[l.Jo,d.value.username]])]),(0,s.Lk)("div",Ee,[t[5]||(t[5]=(0,s.Lk)("i",{class:"fas fa-lock"},null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=e=>d.value.password=e)},null,512),[[l.Jo,d.value.password]])]),u.value?((0,s.uX)(),(0,s.CE)("div",Re,[t[6]||(t[6]=(0,s.Lk)("i",{class:"fas fa-lock"},null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",placeholder:"Confirm Password","onUpdate:modelValue":t[2]||(t[2]=e=>d.value.confirmPassword=e)},null,512),[[l.Jo,d.value.confirmPassword]])])):(0,s.Q3)("",!0),(0,s.Lk)("button",{class:"sign-in-btn",onClick:b},(0,m.v_)(u.value?"Sign Up":"Sign In"),1),(0,s.Lk)("p",Pe,[(0,s.eW)((0,m.v_)(u.value?"Already have an account?":"Don’t have an account?")+" ",1),(0,s.Lk)("span",{class:"register-link",onClick:g},(0,m.v_)(u.value?"Login":"Register"),1)]),(0,s.Lk)("button",{class:"close-btn",onClick:t[3]||(t[3]=e=>c("close"))},"×")]))}};const Ke=(0,Z.A)(Ue,[["__scopeId","data-v-51854f56"]]);var Ae=Ke;const Xe={class:"p-6 space-y-8"},We={class:"grid md:grid-cols-2 gap-8 px-10"},Ie={class:"space-x-4"},Fe=["disabled"],De={class:"block"},Me={class:"block"},Te={class:"ml-4"},ze={class:"block"},Ve={class:"block"},je={class:"modal-card"},Be={class:"modal-card"},$e={class:"modal-card"},Oe={key:0,class:"text-red-500 text-sm mt-1"},Je={class:"modal-actions mt-4"},Ne=["disabled"];var Qe={__name:"SettingsPanel",emits:["change-menu"],setup(e,{emit:t}){const{showAlert:a,showConfirm:n}=ae(),o=t,r=(0,v.Kh)({language:"English",theme:"Light",savedPlacesNotifications:!1,locationTracking:!0,fontSize:"Small",autoDeleteHistory:!1,syncPlaces:!1,exportFavorites:!1}),{user:i,setUser:c}=O();(0,s.sV)(async()=>{const e=await L();c(e)});const u=(0,v.KR)(!1),d=(0,v.Kh)({current:"",new:"",confirm:""}),p=(0,v.KR)(!1),g=(0,s.EW)(()=>d.new.trim()&&d.confirm.trim()&&d.new.trim()!==d.confirm.trim());function y(){u.value=!1,d.current="",d.new="",d.confirm=""}async function f(){if(g.value)a({type:"warning",title:"Warning",message:"Passwords do not match!"});else if(d.current&&d.new&&d.confirm){p.value=!0;try{await F(d.current,d.new,i.value.id),a({type:"success",title:"Success",message:"Password changed successfully ✔"}),y()}catch(e){a({type:"danger",title:"Error",message:e.response?.data?.message||"Error changing password"})}finally{p.value=!1}}else a({type:"warning",title:"Notice",message:"All fields are required"})}const k=(0,v.KR)(!1),b=(0,v.Kh)({newEmail:"",password:""});function h(){k.value=!1,Object.assign(b,{newEmail:"",password:""})}async function w(){if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.newEmail))try{await C(b.newEmail,b.password),a({type:"success",title:"Updated",message:"Email updated successfully ✔"}),h()}catch(e){a({type:"danger",title:"Error",message:e.response?.data?.message||"Error updating email"})}else a({type:"warning",title:"Notice",message:"Invalid email format!"})}const x=(0,v.KR)(!1),_=(0,v.Kh)({newUsername:""}),S=(0,v.KR)(!1),E=(0,s.EW)(()=>_.newUsername.trim()&&!/^[A-Za-z0-9._-]{3,20}$/.test(_.newUsername.trim()));function R(){x.value=!1,_.newUsername=""}async function P(){if(!_.newUsername.trim())return void a({type:"warning",title:"Notice",message:"Please enter a new username"});if(E.value)return void a({type:"warning",title:"Notice",message:"Username must be 3-20 characters long and may include . _ - only"});const e=await n({title:"Confirm Change",message:`Are you sure you want to change the username to "${_.newUsername}"?`});if(e){S.value=!0;try{await M(i.value.id,_.newUsername),a({type:"success",title:"Updated",message:"Username updated successfully ✔"}),R()}catch(t){a({type:"danger",title:"Error",message:t.response?.data?.message||"Error updating username"})}finally{S.value=!1}}}const U=(0,v.KR)(!1);async function K(){const e=await n({title:"Confirm Deletion",message:"Are you sure you want to permanently delete your account? This action cannot be undone.⚠️"});if(e){U.value=!0;try{await D(i.value.id),a({type:"success",title:"Deleted",message:"Account deleted successfully"}),localStorage.clear(),window.location.href="/"}catch(t){a({type:"danger",title:"Error",message:t.response?.data?.message||"An error occurred while deleting the account"})}finally{U.value=!1}}}function A(){o("change-menu","history")}return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[t[43]||(t[43]=(0,s.Lk)("h1",{class:"py-10 text-3xl font-bold text-center text-emerald-700"},"Settings",-1)),(0,s.Lk)("section",Xe,[(0,s.Lk)("div",We,[(0,s.Lk)("div",null,[t[21]||(t[21]=(0,s.Lk)("h2",{class:"font-semibold mb-3"},"General",-1)),t[22]||(t[22]=(0,s.Lk)("label",{class:"block mb-1"},"Language",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.language=e),class:"border rounded px-2 py-1 w-full mb-4"},t[18]||(t[18]=[(0,s.Lk)("option",null,"English",-1)]),512),[[l.u1,r.language]]),t[23]||(t[23]=(0,s.Lk)("label",{class:"block mb-1"},"Theme",-1)),(0,s.Lk)("div",Ie,[(0,s.Lk)("label",null,[(0,s.bo)((0,s.Lk)("input",{type:"radio",value:"Light","onUpdate:modelValue":t[1]||(t[1]=e=>r.theme=e)},null,512),[[l.XL,r.theme]]),t[19]||(t[19]=(0,s.eW)(" Light"))]),(0,s.Lk)("label",null,[(0,s.bo)((0,s.Lk)("input",{type:"radio",value:"Dark","onUpdate:modelValue":t[2]||(t[2]=e=>r.theme=e)},null,512),[[l.XL,r.theme]]),t[20]||(t[20]=(0,s.eW)(" Dark"))])])]),(0,s.Lk)("div",null,[t[28]||(t[28]=(0,s.Lk)("h2",{class:"font-semibold mb-3"},"Account",-1)),(0,s.Lk)("button",{class:"btn-setting",onClick:t[3]||(t[3]=e=>u.value=!0)},t[24]||(t[24]=[(0,s.Lk)("i",{class:"fas fa-key"},null,-1),(0,s.eW)(" Change Password ")])),(0,s.Lk)("button",{class:"btn-setting",onClick:t[4]||(t[4]=e=>k.value=!0)},t[25]||(t[25]=[(0,s.Lk)("i",{class:"fas fa-envelope"},null,-1),(0,s.eW)(" Change Email ")])),(0,s.Lk)("button",{class:"btn-setting",onClick:t[5]||(t[5]=e=>x.value=!0)},t[26]||(t[26]=[(0,s.Lk)("i",{class:"fa-solid fa-user-pen"},null,-1),(0,s.eW)(" Change Username ")])),(0,s.Lk)("button",{class:"btn-setting-danger",disabled:U.value,onClick:K},[t[27]||(t[27]=(0,s.Lk)("i",{class:"fas fa-trash-alt"},null,-1)),(0,s.eW)(" "+(0,m.v_)(U.value?"Deleting…":"Delete Account"),1)],8,Fe)]),(0,s.Lk)("div",null,[t[30]||(t[30]=(0,s.Lk)("h2",{class:"font-semibold mb-3"},"Notifications",-1)),(0,s.Lk)("label",De,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>r.savedPlacesNotifications=e)},null,512),[[l.lH,r.savedPlacesNotifications]]),t[29]||(t[29]=(0,s.eW)(" Saved Places Notifications "))])]),(0,s.Lk)("div",null,[t[32]||(t[32]=(0,s.Lk)("h2",{class:"font-semibold mb-3"},"Privacy & Location",-1)),(0,s.Lk)("label",Me,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>r.locationTracking=e)},null,512),[[l.lH,r.locationTracking]]),t[31]||(t[31]=(0,s.eW)(" Enable Location Tracking "))]),(0,s.Lk)("button",{onClick:A,class:"mt-2 border px-3 py-1 rounded w-full"}," Manage Search Data ")]),(0,s.Lk)("div",null,[t[35]||(t[35]=(0,s.Lk)("h2",{class:"font-semibold mb-3"},"Interface",-1)),t[36]||(t[36]=(0,s.Lk)("label",{class:"block mb-1"},"Font Size",-1)),(0,s.Lk)("label",null,[(0,s.bo)((0,s.Lk)("input",{type:"radio",value:"Small","onUpdate:modelValue":t[8]||(t[8]=e=>r.fontSize=e)},null,512),[[l.XL,r.fontSize]]),t[33]||(t[33]=(0,s.eW)(" Small"))]),(0,s.Lk)("label",Te,[(0,s.bo)((0,s.Lk)("input",{type:"radio",value:"Medium","onUpdate:modelValue":t[9]||(t[9]=e=>r.fontSize=e)},null,512),[[l.XL,r.fontSize]]),t[34]||(t[34]=(0,s.eW)(" Medium"))])]),(0,s.Lk)("div",null,[t[39]||(t[39]=(0,s.Lk)("h2",{class:"font-semibold mb-3"},"Data Settings",-1)),(0,s.Lk)("label",ze,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=e=>r.autoDeleteHistory=e)},null,512),[[l.lH,r.autoDeleteHistory]]),t[37]||(t[37]=(0,s.eW)(" Automatically delete search history every week "))]),(0,s.Lk)("label",Ve,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=e=>r.exportFavorites=e)},null,512),[[l.lH,r.exportFavorites]]),t[38]||(t[38]=(0,s.eW)(" Export favorites to a CSV file "))])])])]),u.value?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onKeydown:(0,l.jR)(y,["esc"]),tabindex:"0"},[(0,s.Lk)("div",je,[t[40]||(t[40]=(0,s.Lk)("h3",{class:"text-xl font-semibold mb-4"},"Change Password",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>d.current=e),type:"password",placeholder:"Current password",class:"input"},null,512),[[l.Jo,d.current]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>d.new=e),type:"password",placeholder:"New password",class:"input"},null,512),[[l.Jo,d.new]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>d.confirm=e),type:"password",placeholder:"Confirm new password",class:"input"},null,512),[[l.Jo,d.confirm]]),(0,s.Lk)("div",{class:"modal-actions"},[(0,s.Lk)("button",{class:"btn-cancel",onClick:y},"Cancel"),(0,s.Lk)("button",{class:"btn-primary",onClick:f},"Save")])])],32)):(0,s.Q3)("",!0),k.value?((0,s.uX)(),(0,s.CE)("div",{key:1,class:"modal-overlay",onKeydown:(0,l.jR)(h,["esc"]),tabindex:"0"},[(0,s.Lk)("div",Be,[t[41]||(t[41]=(0,s.Lk)("h3",{class:"text-xl font-semibold mb-4"},"Change Email",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>b.newEmail=e),type:"email",placeholder:"New email address",class:"input"},null,512),[[l.Jo,b.newEmail]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>b.password=e),type:"password",placeholder:"Current password",class:"input"},null,512),[[l.Jo,b.password]]),(0,s.Lk)("div",{class:"modal-actions"},[(0,s.Lk)("button",{class:"btn-cancel",onClick:h},"Cancel"),(0,s.Lk)("button",{class:"btn-primary",onClick:w},"Save")])])],32)):(0,s.Q3)("",!0),x.value?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"modal-overlay",onClick:(0,l.D$)(R,["self"]),onKeydown:(0,l.jR)(R,["esc"]),tabindex:"0"},[(0,s.Lk)("div",$e,[t[42]||(t[42]=(0,s.Lk)("h3",{class:"text-xl font-semibold mb-4"},"Change Username",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>_.newUsername=e),type:"text",placeholder:"New username",class:"input"},null,512),[[l.Jo,_.newUsername,void 0,{trim:!0}]]),E.value?((0,s.uX)(),(0,s.CE)("p",Oe," Only letters, numbers, . _ - (3–20 chars) ")):(0,s.Q3)("",!0),(0,s.Lk)("div",Je,[(0,s.Lk)("button",{class:"btn-cancel",onClick:R},"Cancel"),(0,s.Lk)("button",{class:"btn-primary",disabled:S.value||E.value||!_.newUsername.trim(),onClick:P},(0,m.v_)(S.value?"Saving...":"Save"),9,Ne)])])],32)):(0,s.Q3)("",!0)],64))}};const He=(0,Z.A)(Qe,[["__scopeId","data-v-5f01ae98"]]);var Ge=He;a(2489);const Ze={class:"flex flex-col items-center justify-start h-full py-12"},qe={class:"w-full md:max-w-3xl bg-white shadow-lg rounded-xl p-8"},Ye={class:"flex gap-4"},et={class:"w-full md:max-w-3xl mt-10"},tt={class:"flex items-center justify-between mb-4"},at={key:0,class:"text-center text-gray-500"},lt={key:1,class:"space-y-4"},st={class:"font-semibold"},nt={class:"text-sm text-gray-500"},ot={class:"text-xs text-gray-400 mt-1"},rt={class:"flex flex-col gap-2 shrink-0"},it=["onClick"],ct=["onClick"],ut={key:2,class:"text-center mt-4"};var dt={__name:"AddPlaceForm",emits:["view"],setup(e){const{showAlert:t,showConfirm:a}=ae(),n=(0,v.KR)({name:"",description:"",category:"",latitude:"",longitude:"",notes:"",image:null}),o=(0,v.KR)(null),r=(0,v.KR)([]),i=(0,v.KR)(3),c=(0,s.EW)(()=>r.value.slice(0,i.value));function u(e){o.value=e.target.files[0]||null}function d(){n.value={name:"",description:"",category:"",latitude:"",longitude:"",notes:"",image:null},o.value=null}async function p(){if(n.value.name&&n.value.category&&n.value.latitude&&n.value.longitude)try{const e={...n.value},a=await A(e);r.value.push(a.data),t({type:"success",title:"Saved",message:"Place added successfully",duration:3500}),d()}catch(e){console.error(e),t({type:"danger",title:"Error",message:"Failed to add place"})}else t({type:"warning",title:"Missing Data",message:"Please enter all required fields"})}async function g(){try{const e=await X();r.value=e.data}catch(e){console.error(e),t({type:"danger",title:"Error",message:"Failed to load places"})}}async function y(e){const l=await a({title:"Delete Place",message:"Are you sure you want to delete this place?"});if(l)try{await W(e),r.value=r.value.filter(t=>t.id!==e),t({type:"success",title:"Deleted",message:"Place deleted successfully"})}catch(s){console.error(s),t({type:"danger",title:"Error",message:"Failed to delete place"})}}async function f(){if(!r.value.length)return;const e=await a({title:"Delete All Places",message:"Do you want to delete all places?"});if(e)try{await I(),r.value=[],t({type:"success",title:"Deleted",message:"All places deleted successfully"})}catch(l){console.error(l),t({type:"danger",title:"Error",message:"Failed to delete all places"})}}return(0,s.sV)(()=>{g()}),(e,t)=>((0,s.uX)(),(0,s.CE)("section",Ze,[(0,s.Lk)("div",qe,[t[9]||(t[9]=(0,s.Lk)("h1",{class:"text-2xl font-bold text-center mb-8 text-emerald-700"},"Add Unlisted Place",-1)),(0,s.Lk)("form",{onSubmit:(0,l.D$)(p,["prevent"]),class:"space-y-5"},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.value.name=e),placeholder:"Place Name",class:"input"},null,512),[[l.Jo,n.value.name]]),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.description=e),placeholder:"Description",rows:"3",class:"input"},null,512),[[l.Jo,n.value.description]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.value.category=e),class:"input"},t[7]||(t[7]=[(0,s.Lk)("option",{disabled:"",value:""},"-- Select a category --",-1),(0,s.Lk)("option",null,"Public",-1),(0,s.Lk)("option",null,"Private",-1),(0,s.Lk)("option",null,"Confidential",-1),(0,s.Lk)("option",null,"Top Secret",-1)]),512),[[l.u1,n.value.category]]),(0,s.Lk)("div",Ye,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.value.latitude=e),placeholder:"Latitude",class:"input"},null,512),[[l.Jo,n.value.latitude]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.value.longitude=e),placeholder:"Longitude",class:"input"},null,512),[[l.Jo,n.value.longitude]])]),(0,s.Lk)("input",{type:"file",onChange:u,class:"input-file"},null,32),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.value.notes=e),placeholder:"Optional Notes",rows:"2",class:"input"},null,512),[[l.Jo,n.value.notes]]),(0,s.Lk)("div",{class:"flex justify-end gap-3 pt-4"},[(0,s.Lk)("button",{type:"button",onClick:d,class:"btn-cancel"},"Cancel"),t[8]||(t[8]=(0,s.Lk)("button",{type:"submit",class:"btn-submit"},"Submit",-1))])],32)]),(0,s.Lk)("div",et,[(0,s.Lk)("div",tt,[t[10]||(t[10]=(0,s.Lk)("h2",{class:"text-lg font-semibold text-emerald-700"},"Unlisted Places",-1)),r.value.length?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:f,class:"text-red-600 hover:underline text-sm"}," Clear All ")):(0,s.Q3)("",!0)]),r.value.length?((0,s.uX)(),(0,s.CE)("ul",lt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,t=>((0,s.uX)(),(0,s.CE)("li",{key:t.id,class:"place-card"},[(0,s.Lk)("div",null,[(0,s.Lk)("h3",st,(0,m.v_)(t.name),1),(0,s.Lk)("p",nt,(0,m.v_)(t.description),1),(0,s.Lk)("p",ot,(0,m.v_)(t.latitude)+", "+(0,m.v_)(t.longitude),1)]),(0,s.Lk)("div",rt,[(0,s.Lk)("button",{onClick:a=>e.$emit("view",t),class:"btn-view"},"View in Map",8,it),(0,s.Lk)("button",{onClick:e=>y(t.id),class:"btn-delete"},"Delete",8,ct)])]))),128))])):((0,s.uX)(),(0,s.CE)("p",at,"No saved places yet")),r.value.length>i.value?((0,s.uX)(),(0,s.CE)("div",ut,[(0,s.Lk)("button",{onClick:t[6]||(t[6]=e=>i.value+=3),class:"text-emerald-700 font-medium underline hover:text-emerald-900"}," Load more ")])):(0,s.Q3)("",!0)])]))}};const pt=(0,Z.A)(dt,[["__scopeId","data-v-1225ac3a"]]);var mt=pt;const vt={class:"py-12 px-4 flex justify-center"},gt={class:"saved-panel w-full max-w-4xl"},yt={key:0,class:"empty-msg"},ft={key:1,class:"space-y-4"},kt={class:"truncate"},bt={class:"place-name"},ht={class:"btn-group-horizontal"},wt=["onClick"],Lt=["onClick"];var Ct={__name:"SavedPlacesPanel",emits:["view"],setup(e,{emit:t}){const{showAlert:a}=ae(),l=(0,v.KR)([]);async function n(){try{const{data:e}=await S();l.value=e}catch(e){console.error("❌ Failed to load saved places:",e)}}async function o(e){try{await E(e),l.value=l.value.filter(t=>t.id!==e)}catch(t){console.error("❌ Failed to delete place:",t),a({type:"danger",title:"Error",message:"Failed to delete the place"})}}return(0,s.wB)(l,()=>{localStorage.setItem("savedPlaces",JSON.stringify(l.value))}),(0,s.sV)(()=>{n()}),(e,t)=>((0,s.uX)(),(0,s.CE)("main",vt,[(0,s.Lk)("div",gt,[t[0]||(t[0]=(0,s.Lk)("h1",{class:"panel-title"},"⭐ Saved Places",-1)),l.value.length?((0,s.uX)(),(0,s.CE)("ul",ft,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,t=>((0,s.uX)(),(0,s.CE)("li",{key:t.id,class:"place-card"},[(0,s.Lk)("div",kt,[(0,s.Lk)("h2",bt,(0,m.v_)(t.title),1)]),(0,s.Lk)("div",ht,[(0,s.Lk)("button",{onClick:a=>e.$emit("view",t),class:"btn view"},"View on map",8,wt),(0,s.Lk)("button",{onClick:e=>o(t.id),class:"btn delete"},"Delete",8,Lt)])]))),128))])):((0,s.uX)(),(0,s.CE)("p",yt,"No saved places yet"))])]))}};const xt=(0,Z.A)(Ct,[["__scopeId","data-v-0c568f4e"]]);var _t=xt;const St={class:"w-full h-full px-15 py-20 overflow-y-auto space-y-4 mt-3"},Et={class:"font-semibold text-gray-800 truncate min-w-0"},Rt={class:"text-xs text-gray-600 whitespace-nowrap ml-4"},Pt={key:1,class:"text-center text-gray-500"};var Ut={__name:"SearchHistoryPanel",props:{newQuery:{type:String,default:""}},setup(e){const t=(0,v.KR)([]);async function a(){try{const{data:e}=await U();t.value=e}catch(e){console.error("Failed to load history:",e)}}async function l(){try{await K(),t.value=[]}catch(e){console.error("Failed to clear history:",e)}}function n(e){const t=new Date(e);return t.toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}return(0,s.sV)(a),(e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[a[1]||(a[1]=(0,s.Lk)("h1",{class:"py-10 text-3xl font-bold text-center text-emerald-700"},"Search History",-1)),(0,s.Lk)("button",{onClick:l,class:"absolute left-10 -translate-y-1/2 text-2xl hover:text-red-600 flex items-center gap-1 m-4"},a[0]||(a[0]=[(0,s.Lk)("svg",{class:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,s.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),(0,s.eW)(" Clear ")])),(0,s.Lk)("section",St,[t.value.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(t.value,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"flex justify-between items-center bg-gray-50 rounded-full px-4 py-2 shadow-sm"},[(0,s.Lk)("span",Et,(0,m.v_)(e.query),1),(0,s.Lk)("span",Rt,(0,m.v_)(n(e.searchedAt)),1)]))),128)):((0,s.uX)(),(0,s.CE)("p",Pt," No search history yet "))])],64))}};const Kt=Ut;var At=Kt;const Xt={class:"admin-panel p-6 space-y-6"},Wt={class:"grid grid-cols-3 gap-4 text-center"},It={class:"bg-gray-100 p-4 rounded"},Ft={class:"bg-green-100 p-4 rounded"},Dt={class:"bg-blue-100 p-4 rounded"},Mt={class:"w-full mt-6 border text-center"},Tt={class:"px-6 py-4 text-center space-x-2"},zt=["onClick"],Vt=["onClick"],jt=["onClick"],Bt={class:"flex justify-center items-center gap-4 mt-6"},$t=["disabled"],Ot={class:"text-sm text-gray-600 font-medium"},Jt=["disabled"],Nt=10;var Qt={__name:"AdminPanel",setup(e){const{showAlert:t,showConfirm:a,showPasswordPrompt:n}=ae(),{user:o,setUser:r}=O(),i=(0,v.KR)([]),c=(0,v.KR)(0),u=(0,v.KR)(0),d=(0,v.KR)(0),p=(0,v.KR)(0),g=(0,v.KR)(1),y=(0,s.EW)(()=>c.value+1<g.value);function f(){c.value>0&&(c.value--,b())}function k(){y.value&&(c.value++,b())}async function b(){try{const e=await P(c.value,Nt),{users:{content:t,totalPages:a,totalElements:l},activeAdminCount:s,activeUserCount:n}=e.data;i.value=t,g.value=a,u.value=l,d.value=s,p.value=n;const o=await L();r(o)}catch(e){console.error(e),t({type:"danger",title:"Error",message:"Failed to load users"})}}async function h(e){try{await R(e.id),b(),t({type:"success",title:"Role Updated",message:`User "${e.name}" role has been toggled`})}catch{t({type:"danger",title:"Error",message:"Failed to update role"})}}async function w(e){const a=await n({title:`Reset Password for ${e.name}`,label:"New Password",confirmText:"Reset",cancelText:"Cancel"});if(a)try{await V(e.id,a),t({type:"success",title:"Password Reset",message:"Password reset successfully"})}catch{t({type:"danger",title:"Error",message:"Failed to reset password"})}}async function C(e){const l=await a({title:"Delete User",message:"Are you sure you want to delete this user?"});if(l)try{await D(e),b(),t({type:"success",title:"User Deleted",message:"User was deleted successfully"})}catch{t({type:"danger",title:"Error",message:"Failed to delete user"})}}return(0,s.sV)(b),(e,t)=>((0,s.uX)(),(0,s.CE)("div",Xt,[t[4]||(t[4]=(0,s.Lk)("h1",{class:"text-2xl font-bold mb-4 text-emerald-700"},"Admin Dashboard",-1)),(0,s.Lk)("div",Wt,[(0,s.Lk)("div",It,"👥 Total Users: "+(0,m.v_)(u.value),1),(0,s.Lk)("div",Ft,"🟢 Active Users: "+(0,m.v_)(p.value),1),(0,s.Lk)("div",Dt,"🛡️ Admins: "+(0,m.v_)(d.value),1)]),(0,s.Lk)("table",Mt,[t[3]||(t[3]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",{class:"bg-gray-200"},[(0,s.Lk)("th",null,"Name"),(0,s.Lk)("th",null,"Email"),(0,s.Lk)("th",null,"Role"),(0,s.Lk)("th",null,"Status"),(0,s.Lk)("th",null,"Actions")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,e=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,m.v_)(e.name),1),(0,s.Lk)("td",null,(0,m.v_)(e.email),1),(0,s.Lk)("td",null,(0,m.v_)(e.isUser?"User":"Admin"),1),(0,s.Lk)("td",null,(0,m.v_)(e.active?"Active":"Inactive"),1),(0,s.Lk)("td",Tt,[(0,s.bo)((0,s.Lk)("button",{onClick:t=>h(e),class:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-full text-sm font-medium transition"},t[0]||(t[0]=[(0,s.Lk)("i",{class:"fas fa-user-shield"},null,-1),(0,s.eW)(" Toggle ")]),8,zt),[[l.aG,e.active]]),(0,s.bo)((0,s.Lk)("button",{onClick:t=>w(e),class:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded-full text-sm font-medium transition"},t[1]||(t[1]=[(0,s.Lk)("i",{class:"fas fa-key"},null,-1),(0,s.eW)(" Reset ")]),8,Vt),[[l.aG,e.active]]),(0,s.bo)((0,s.Lk)("button",{onClick:t=>C(e.id),class:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 hover:bg-red-200 rounded-full text-sm font-medium transition"},t[2]||(t[2]=[(0,s.Lk)("i",{class:"fas fa-trash-alt"},null,-1),(0,s.eW)(" Delete ")]),8,jt),[[l.aG,e.active]])])])),[[l.aG,e.id!=(0,v.R1)(o).id]])),128))])]),(0,s.Lk)("div",Bt,[(0,s.Lk)("button",{onClick:f,disabled:c.value<=0,class:"px-4 py-2 rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"}," ⬅️ Prev ",8,$t),(0,s.Lk)("span",Ot," Page "+(0,m.v_)(c.value+1),1),(0,s.Lk)("button",{onClick:k,disabled:!y.value,class:"px-4 py-2 rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"}," Next ➡️ ",8,Jt)])]))}};const Ht=Qt;var Gt=Ht,Zt={__name:"WelcomeOverlay",setup(e){return(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"welcome-overlay",onKeyup:t[1]||(t[1]=(0,l.jR)(t=>e.$emit("start"),["esc"])),tabindex:"0"},[t[2]||(t[2]=(0,s.Lk)("div",{class:"welcome-card"},[(0,s.Lk)("h1",null,"Welcome to Wakeb Maps"),(0,s.Lk)("p",{class:"en"},"Begin your journey by searching✨"),(0,s.Lk)("hr",{class:"divider"}),(0,s.Lk)("p",{class:"en"},[(0,s.eW)(" During my summer training at "),(0,s.Lk)("strong",null,"Wakeb Data"),(0,s.eW)(" in Riyadh, I worked on "),(0,s.Lk)("strong",null,"Wakeb Maps"),(0,s.eW)(", an interactive web mapping system that combines a Vue.js + Leaflet front end with Spring Boot microservices to process data and expose REST APIs. We secured the platform with JWT and Spring Security for role- and permission-based access, and built a JavaFX desktop client that shares the same API contracts. The stack was containerized with Docker for easier deployment, and Postman was used to validate integration across services. ")])],-1)),(0,s.Lk)("button",{class:"start-btn",onClick:t[0]||(t[0]=t=>e.$emit("start"))}," Start ")],32))}};const qt=(0,Z.A)(Zt,[["__scopeId","data-v-45abe8b1"]]);var Yt=qt;const ea={class:"page-container"},ta={class:"navbar"},aa={class:"navbar-right"},la={key:0,class:"status-message"},sa={key:1,class:"side-dashboard"},na={class:"dashboard-menu"},oa={class:"map-and-overlay"},ra={id:"map",class:"map"},ia={key:5,class:"search-overlay"};var ca={__name:"HomeView",setup(e){const t=(0,v.KR)(!1),n=(0,v.KR)(!1),o=(0,v.KR)(!1),r=(0,v.KR)("map"),c=(0,v.KR)(JSON.parse(localStorage.getItem("savedPlaces")||"[]")),u=(0,v.KR)(""),d=(0,v.KR)(!0),{user:p,setUser:g}=O(),{showAlert:f}=ae(),k=(0,v.KR)(null),b=(0,v.KR)(null),h=(0,v.KR)(null),w=(0,v.KR)(null),C=(0,v.KR)(null),S=(0,v.KR)(null),E=(0,v.KR)(null),R=(0,v.KR)(null),P=(0,v.KR)(null),U=(0,v.KR)(null),K=(0,v.KR)(null),A=`fav-${Date.now()}`;let X,W="",I=!1,F="";function D(){return h.value?(V(),void $()):sessionStorage.getItem("coords")?(h.value=JSON.parse(sessionStorage.getItem("coords")),void z(h.value)):(w.value=!0,void navigator.geolocation.getCurrentPosition(M,T))}function M(e){w.value=null;const t={lat:e.coords.latitude,lng:e.coords.longitude};sessionStorage.setItem("coords",JSON.stringify(t)),h.value=t,z(h.value)}function T(e){w.value=null,S.value=!0,E.value=e.message}function z(e){const t=y().icon({iconUrl:a(5633),iconSize:[35,35]});C.value=y().marker([e.lat,e.lng],{icon:t}).addTo(X),X.setView([e.lat,e.lng],13)}function V(){h.value=null,sessionStorage.removeItem("coords"),C.value?.setOpacity(0)}function j(e){R.value&&X.removeLayer(R.value),$(),W={lat:e.coordinates[1],lng:e.coordinates[0]};const t=y().icon({iconUrl:a(456),iconSize:[35,35]});R.value=y().marker([W.lat,W.lng],{icon:t}).addTo(X),X.setView([W.lat,W.lng],14),N()}function B(){h.value?setTimeout(()=>{$();let e=h.value,t=W;P.value=y().Routing.control({waypoints:[y().latLng(e.lat,e.lng),y().latLng(t.lat,t.lng)],lineOptions:{styles:[{color:"green",weight:4}]},createMarker:()=>null,addWaypoints:!1,draggableWaypoints:!1,fitSelectedRoutes:!0}).addTo(X)},500):f({type:"warning",title:"Location Service Disabled ",message:"Please enable location (GPS) on your device to display the route."})}function $(){P.value&&(X.removeControl(P.value),P.value=null)}function J(){U.value=!U.value}function N(){U.value=null}function Q(e){u.value=e}function H(){R.value&&(R.value?.setOpacity(0),R.value=null),$()}function G(){S.value=null,E.value=null}async function Z(){t.value=!1,n.value=!0,o.value=!0,setTimeout(()=>{n.value=!1},4e3);const e=await L();g(e)}function q(){k.value?.logoutUser?.(),b.value?.removeResults?.(),o.value=!1,window.location.href="/",$(),V(),h.value=null,U.value=null,R.value?.remove?.(),R.value=null}function ee(){d.value=!1}function te(){(0,s.dY)(()=>{X&&(X.invalidateSize(!0),X.setView(X.getCenter(),X.getZoom()))})}function le(e){r.value="map";const t=Number(e.lat??e.latitude),a=Number(e.lng??e.longitude);isNaN(t)||isNaN(a)?console.error("Missing or invalid coordinates",e):(X.flyTo([t,a],16),y().popup().setLatLng([t,a]).setContent(`<strong>${e.title??e.description}</strong>`).openOn(X))}async function se(e){const t={title:F[0]||`Point  ${e.lat.toFixed(4)}, ${e.lng.toFixed(4)}`,latitude:e.lat,longitude:e.lng};try{const{data:e}=await _(t);c.value.push(e),f({type:"success",title:"Saved ",message:" Added to favorites ⭐"})}catch(a){console.error("Failed to save place:",a),f({type:"danger",title:" Save Failed",message:" Could not add to favorites ❌"})}}return(0,s.wB)(u,async e=>{if(e)try{await x(e)}catch(t){console.error("Failed to save history:",t)}}),(0,s.wB)(t,()=>{X&&setTimeout(()=>X.invalidateSize(),350)}),(0,s.wB)(r,e=>{"map"===e&&setTimeout(()=>X?.invalidateSize(),300)}),(0,s.sV)(()=>{if(I)return;const e=y().latLngBounds([-90,-180],[90,180]);X=y().map("map",{center:[24.7136,46.6753],zoom:11,minZoom:5,maxZoom:16,maxBounds:e,maxBoundsViscosity:1,inertia:!1,worldCopyJump:!1});const t=y().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}),a=y().tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles © Esri"}),l=y().tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:"&copy; CartoDB"}),s=y().tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:"&copy; CartoDB"}),n=y().tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:"Map data © OpenTopoMap contributors"}),r=y().tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZWlkcnIiLCJhIjoiY21jOHQwbHg0MDRmZzJyczlja3BjZzczMiJ9.DSq-cPrfxg8FhKbnDltgWg",{id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,attribution:"Mapbox © OpenStreetMap"});let i,c;t.addTo(X),y().control.layers({OpenStreetMap:t,"Esri Imagery (Satellite)":a,"CartoDB Positron":l,"CartoDB Dark":s,"OpenTopoMap ":n,"Mapbox Streets":r}).addTo(X),X.whenReady(()=>{$();const e=document.querySelector(".leaflet-control-layers"),t=document.getElementById("custom-layer-control");e&&t&&t.appendChild(e)}),X.on("click",async e=>{({lat:i,lng:c}=e.latlng);try{const e=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${c},${i}.json?access_token=pk.eyJ1IjoiZWlkcnIiLCJhIjoiY21jOHQwbHg0MDRmZzJyczlja3BjZzczMiJ9.DSq-cPrfxg8FhKbnDltgWg&language=ar`),t=await e.json();F=t.features?.map(e=>e.place_name)??[]}catch(l){console.warn("Reverse-geocoding failed:",l),K.value={lat:i,lng:c}}const t=o.value,a=`\n  <div style="text-align:right">\n    <h3 style="margin:0 0 6px 0;font-size:1.1rem;color:#111;">${F[0]}</h3>\n    <p style="margin:0 0 6px 0;color:#555;">${F[1]}</p>\n    <p style="margin:0 0 6px 0;font-size:0.85rem;color:#666;">\n      الموقع: ${i.toFixed(5)}, ${c.toFixed(5)}\n    </p>\n      ${t?`<button id="${A}" style="margin-top:6px;padding:6px 14px;border-radius:6px;background:#059669;color:#fff;font-size:0.9rem">\n               ⭐ Add to Saved Places\n             </button>`:""}\n  </div>\n`;y().popup({closeButton:!0,offset:[0,-10]}).setLatLng(e.latlng).setContent(a).openOn(X)}),X.on("popupopen",()=>{const e=document.getElementById(A);e&&e.addEventListener("click",()=>{se({lat:i,lng:c})})}),X.on("moveend",N),D(),I=!0}),(e,a)=>((0,s.uX)(),(0,s.CE)("div",ea,[(0,s.bF)(i),(0,s.Lk)("nav",ta,[a[13]||(a[13]=(0,s.Lk)("div",{class:"navbar-left"},[(0,s.Lk)("h1",{class:"logo"},"Wakeb Maps")],-1)),(0,s.Lk)("div",aa,[n.value?((0,s.uX)(),(0,s.CE)("span",la,"Success! ✓")):(0,s.Q3)("",!0),o.value?((0,s.uX)(),(0,s.CE)("button",{key:1,class:"user-flag",onClick:a[0]||(a[0]=e=>r.value="settings")},[a[10]||(a[10]=(0,s.Lk)("i",{class:"fa-solid fa-user"},null,-1)),(0,s.eW)(" "+(0,m.v_)((0,v.R1)(p)?.name),1)])):(0,s.Q3)("",!0),o.value?((0,s.uX)(),(0,s.CE)("button",{key:2,class:"logout-button",onClick:q},a[11]||(a[11]=[(0,s.Lk)("i",{class:"fas fa-sign-out-alt"},null,-1),(0,s.eW)(" Logout ")]))):((0,s.uX)(),(0,s.CE)("button",{key:3,class:"logout-button",onClick:a[1]||(a[1]=e=>t.value=!0)},a[12]||(a[12]=[(0,s.Lk)("i",{class:"fas fa-user"},null,-1),(0,s.eW)(" Login ")])))])]),(0,s.bF)(l.eB,{name:"fade",onAfterLeave:te},{default:(0,s.k6)(()=>[d.value?((0,s.uX)(),(0,s.Wv)(Yt,{key:0,onStart:ee},null,8,["onStart"])):(0,s.Q3)("",!0)]),_:1}),(0,s.Lk)("div",{class:(0,m.C4)(["content-container",{"with-login":t.value}])},[t.value?((0,s.uX)(),(0,s.Wv)(Ae,{key:0,class:"login-panel",onClose:a[2]||(a[2]=e=>t.value=!1),onSuccess:Z,ref_key:"loginPanelRef",ref:k},null,512)):(0,s.Q3)("",!0),o.value?((0,s.uX)(),(0,s.CE)("div",sa,[(0,s.Lk)("ul",na,[(0,s.Lk)("li",{class:(0,m.C4)({active:"map"===r.value}),onClick:a[3]||(a[3]=e=>r.value="map")},"Map",2),(0,s.Lk)("li",{class:(0,m.C4)({active:"saved"===r.value}),onClick:a[4]||(a[4]=e=>r.value="saved")},"Saved Places",2),(0,s.Lk)("li",{class:(0,m.C4)({active:"history"===r.value}),onClick:a[5]||(a[5]=e=>r.value="history")},"Search History",2),(0,s.Lk)("li",{class:(0,m.C4)({active:"add"===r.value}),onClick:a[6]||(a[6]=e=>r.value="add")},"Add Unlisted Place",2),(0,s.Lk)("li",{class:(0,m.C4)({active:"settings"===r.value}),onClick:a[7]||(a[7]=e=>r.value="settings")},"Settings",2),(0,s.bo)((0,s.Lk)("li",{class:(0,m.C4)({active:"admin"===r.value}),onClick:a[8]||(a[8]=e=>r.value="admin")},"Administration ",2),[[l.aG,!(0,v.R1)(p)?.isUser]])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",oa,[(0,s.bo)((0,s.Lk)("div",ra,a[14]||(a[14]=[(0,s.Lk)("div",{id:"custom-layer-control",class:"custom-layer-control"},null,-1)]),512),[[l.aG,"map"===r.value]]),"add"===r.value?((0,s.uX)(),(0,s.Wv)(mt,{key:0,onView:le})):(0,s.Q3)("",!0),"saved"===r.value?((0,s.uX)(),(0,s.Wv)(_t,{key:1,onView:le})):(0,s.Q3)("",!0),"settings"===r.value?((0,s.uX)(),(0,s.Wv)(Ge,{key:2,"selected-menu":r.value,onChangeMenu:a[9]||(a[9]=e=>r.value=e)},null,8,["selected-menu"])):(0,s.Q3)("",!0),"admin"===r.value?((0,s.uX)(),(0,s.Wv)(Gt,{key:3})):(0,s.Q3)("",!0),"history"===r.value?((0,s.uX)(),(0,s.Wv)(At,{key:4})):(0,s.Q3)("",!0),"map"===r.value?((0,s.uX)(),(0,s.CE)("div",ia,[(0,s.bF)(xe,{onToggleSearchResults:J,onSaveHistory:Q,onGetGeolocation:D,onPlotResult:j,onRemoveResult:H,onAddRoute:B,coords:h.value,fetchCoords:w.value,searchResults:U.value,ref_key:"removeResultsRef",ref:b},null,8,["coords","fetchCoords","searchResults"])])):(0,s.Q3)("",!0)])],2),S.value?((0,s.uX)(),(0,s.Wv)(Y,{key:0,geoErrorMsg:E.value,onCloseGeoError:G},null,8,["geoErrorMsg"])):(0,s.Q3)("",!0)]))}};const ua=(0,Z.A)(ca,[["__scopeId","data-v-ab7f3130"]]);var da=ua;const pa=[{path:"/",name:"home",component:da}],ma=(0,p.aE)({history:(0,p.Bt)(),routes:pa});var va=ma;(0,l.Ef)(d).use(va).mount("#app")},5633:function(e,t,a){e.exports=a.p+"img/map-marker-red.d479dee5.svg"}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,l,s,n){if(!l){var o=1/0;for(u=0;u<e.length;u++){l=e[u][0],s=e[u][1],n=e[u][2];for(var r=!0,i=0;i<l.length;i++)(!1&n||o>=n)&&Object.keys(a.O).every(function(e){return a.O[e](l[i])})?l.splice(i--,1):(r=!1,n<o&&(o=n));if(r){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[l,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,n,o=l[0],r=l[1],i=l[2],c=0;if(o.some(function(t){return 0!==e[t]})){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(i)var u=i(a)}for(t&&t(l);c<o.length;c++)n=o[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},l=self["webpackChunkclient"]=self["webpackChunkclient"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],function(){return a(2649)});l=a.O(l)})();
//# sourceMappingURL=app.021d1365.js.map